local PathfindingService = game:GetService("PathfindingService")
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Inicializa o inventário do Trollge
if not player:FindFirstChild("InventarioTrollge") then
    local inventarioTrollge = Instance.new("Folder")
    inventarioTrollge.Name = "InventarioTrollge"
    inventarioTrollge.Parent = player
end

-- Configurações de interruptores
local detectarTiposDeBaus = {
    ["Dark Chest"] = true,
    ["Light Chest"] = true,
    ["Fish Chest"] = true,
    ["Drip Chest"] = true,
    ["Radioactive Chest"] = true,
    ["Demonic Chest"] = true,
    ["Machine Chest"] = true,
    ["Creepy Chest"] = true,
    ["Glitch Chest"] = true,
    ["Ruler Chest"] = true,
    ["Omniversal Chest"] = true
}
local transferirItensParaTrollge = {
    ["Dark Chest Item"] = true,
    ["Light Chest Item"] = true,
    ["Fish Chest Item"] = true,
    ["Drip Chest Item"] = true,
    ["Radioactive Chest Item"] = true,
    ["Demonic Chest Item"] = true,
    ["Machine Chest Item"] = true,
    ["Creepy Chest Item"] = true,
    ["Glitch Chest Item"] = true,
    ["Ruler Chest Item"] = true,
    ["Omniversal Chest Item"] = true
}

-- Variáveis para ativar/desativar o script e ESP
local scriptAtivo = false
local espAtivo = false

function alternarScript()
    scriptAtivo = not scriptAtivo
    if scriptAtivo then
        print("Script ativado")
    else
        print("Script desativado")
    end
end

function alternarESP()
    espAtivo = not espAtivo
    if espAtivo then
        print("ESP ativado")
    else
        print("ESP desativado")
    end
end

game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
    if input.KeyCode == Enum.KeyCode.G and not gameProcessed then
        alternarScript()
    elseif input.KeyCode == Enum.KeyCode.H and not gameProcessed then
        alternarESP()
    end
end)

-- Carregando a biblioteca de UI
local GUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/Patskorn/GUI/main/Daino.lua"))()
local idk = GUI:new()
local win = idk:Tap("Baús")
win:Button("Ativar/Desativar Script", function()
    alternarScript()
end)
win:Label("Coletor de Baús")
win:Toggle("Script Ativo", false, function(TPHUB)
    scriptAtivo = TPHUB
    if scriptAtivo then
        print("Script ativado via Toggle")
    else
        print("Script desativado via Toggle")
    end
end)
win:Toggle("ESP Ativo", false, function(TPHUB)
    espAtivo = TPHUB
    if espAtivo then
        print("ESP ativado via Toggle")
    else
        print("ESP desativado via Toggle")
    end
end)
win:Slider("Intervalo de Espera", 1, 10, 2, function(t)
    waitTime = t
end)
win:Dropdown("Tipos de Baús para Coletar", {"Dark Chest", "Light Chest", "Fish Chest", "Drip Chest", "Radioactive Chest", "Demonic Chest", "Machine Chest", "Creepy Chest", "Glitch Chest", "Ruler Chest", "Omniversal Chest"}, function(selected)
    detectarTiposDeBaus[selected] = not detectarTiposDeBaus[selected]
    print("Tipo de Baú Selecionado: " .. selected)
end)

-- Adicionando a TextBox para exibir informações dos baús
local TextBox = win:TextBox("Informações dos Baús", "", function() end)
TextBox.TextWrapped = true
TextBox.ClearTextOnFocus = false
TextBox.MultiLine = true

-- Função para detectar e listar informações dos baús
function listarBaus()
    local baus = {}
    for _, objeto in pairs(game.Workspace:GetChildren()) do
        if objeto:IsA("Part") and objeto.Name:match("Chest") then
            local tipoBau = "Desconhecido"
            if objeto.Name:match("Dark Chest") then
                tipoBau = "Dark Chest"
            elseif objeto.Name:match("Light Chest") then
                tipoBau = "Light Chest"
            elseif objeto.Name:match("Fish Chest") then
                tipoBau = "Fish Chest"
            elseif objeto.Name:match("Drip Chest") then
                tipoBau = "Drip Chest"
            elseif objeto.Name:match("Radioactive Chest") then
                tipoBau = "Radioactive Chest"
            elseif objeto.Name:match("Demonic Chest") then
                tipoBau = "Demonic Chest"
            elseif objeto.Name:match("Machine Chest") then
                tipoBau = "Machine Chest"
            elseif objeto.Name:match("Creepy Chest") then
                tipoBau = "Creepy Chest"
            elseif objeto.Name:match("Glitch Chest") then
                tipoBau = "Glitch Chest"
            elseif objeto.Name:match("Ruler Chest") then
                tipoBau = "Ruler Chest"
            elseif objeto.Name:match("Omniversal Chest") then
                tipoBau = "Omniversal Chest"
            end
            
            local bauInfo = "Baú: " .. objeto.Name .. "\nTipo: " .. tipoBau .. "\nPosição: " .. tostring(objeto.Position) .. "\n"
            table.insert(baus, bauInfo)
            TextBox.Text = TextBox.Text .. bauInfo .. "\n"
            print(bauInfo)
        end
    end
    return baus
end

-- Loop principal para listar baús
while true do
    if espAtivo then
        TextBox.Text = ""  -- Limpa a TextBox a cada iteração para evitar duplicatas
        listarBaus()
    end
    wait(5) -- Intervalo de 5 segundos entre cada verificação
end
